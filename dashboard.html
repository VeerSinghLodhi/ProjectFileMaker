<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rate Photos - HotOrNot</title>
  <meta name="_csrf" th:content="${_csrf.token}" />
  <meta name="_csrf_header" th:content="${_csrf.headerName}" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.1/font/bootstrap-icons.min.css" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400..700&display=swap" rel="stylesheet">
  <style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Caveat', 'system-ui';
        background: #fafafa;
        color: #1a1a1a;
        min-height: 100vh;
        position: relative;
        overflow-x: hidden;
        padding-bottom: 80px;
    }

    @media (min-width: 768px) {
        body {
            padding-bottom: 0;
        }
    }

    /* Gradient background with floating orbs */
    .bg-gradient {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        overflow: hidden;
        background: #fafafa;
    }

    .gradient-orb {
        position: absolute;
        border-radius: 50%;
        filter: blur(100px);
        opacity: 0.1;
        animation: float 20s ease-in-out infinite;
    }

    .orb-1 {
        width: 600px;
        height: 600px;
        background: radial-gradient(circle, #F73B20, transparent);
        top: -10%;
        right: -10%;
        animation-duration: 25s;
    }

    .orb-2 {
        width: 500px;
        height: 500px;
        background: radial-gradient(circle, #ff5238, transparent);
        bottom: -15%;
        left: -10%;
        animation-duration: 20s;
        animation-delay: 2s;
    }

    .orb-3 {
        width: 400px;
        height: 400px;
        background: radial-gradient(circle, #F73B20, transparent);
        top: 40%;
        left: 50%;
        animation-duration: 18s;
        animation-delay: 1s;
    }

    @keyframes float {
        0%, 100% { transform: translate(0, 0) scale(1); }
        33% { transform: translate(50px, -80px) scale(1.1); }
        66% { transform: translate(-50px, 50px) scale(0.9); }
    }

    .bg-gradient span {
        position: absolute;
        width: 400px;
        height: 400px;
        background: radial-gradient(circle, #F73B20, transparent);
        top: 40%;
        left: 50%;
        border-radius: 50%;
        filter: blur(100px);
        opacity: 0.1;
        animation: float 18s ease-in-out infinite;
        animation-delay: 1s;
    }

    /* Desktop Navigation */
    .navbar-desktop {
        background: rgba(255, 255, 255, 0.95) !important;
        backdrop-filter: blur(20px);
        border-bottom: 1px solid rgba(247, 59, 32, 0.15);
        box-shadow: 0 4px 30px rgba(247, 59, 32, 0.15);
        padding: 1.5rem 0;
        transition: all 0.3s ease;
        display: none;
    }

    @media (min-width: 768px) {
        .navbar-desktop {
            display: block !important;
        }
    }

    .navbar-desktop.scrolled {
        padding: 1rem 0;
        box-shadow: 0 4px 30px rgba(247, 59, 32, 0.2);
    }

    .navbar-brand {
        font-size: 1.6rem;
        font-weight: 700;
        letter-spacing: -1px;
        transition: all 0.3s ease;
    }

    .navbar-brand:hover {
        transform: scale(1.05);
    }

    .logo-hot {
        color: #F73B20;
        transition: all 0.3s ease;
    }

    .logo-not {
        color: #F73B20;
    }

    .nav-link {
        color: rgba(26, 26, 26, 0.85) !important;
        font-weight: 500;
        margin: 0 1rem;
        transition: all 0.3s ease;
        position: relative;
        font-size: 0.95rem;
    }

    .nav-link::before {
        content: '';
        position: absolute;
        bottom: -5px;
        left: 50%;
        transform: translateX(-50%);
        width: 0;
        height: 2px;
        background: #F73B20;
        transition: width 0.3s ease;
    }

    .nav-link:hover {
        color: #F73B20 !important;
    }

    .nav-link:hover::before {
        width: 60%;
    }

    .nav-link.active {
        color: #F73B20 !important;
    }

    .btn-neon {
        background: #F73B20;
        color: white;
        border: none;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1px;
        padding: 0.7rem 2rem;
        border-radius: 50px;
        box-shadow: 0 4px 20px rgba(247, 59, 32, 0.3);
        transition: all 0.3s ease;
    }

    .btn-neon:hover {
        background: #ff5238;
        transform: translateY(-2px);
        box-shadow: 0 6px 30px rgba(247, 59, 32, 0.5);
        color: white;
    }

    /* Mobile Bottom Navigation */
    .bottom-nav {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: rgba(255, 255, 255, 0.98);
        backdrop-filter: blur(20px);
        border-top: 1px solid rgba(247, 59, 32, 0.15);
        box-shadow: 0 -4px 20px rgba(247, 59, 32, 0.1);
        z-index: 1000;
        display: flex;
        justify-content: space-around;
        align-items: center;
        padding: 8px 0;
        height: 70px;
    }

    @media (min-width: 768px) {
        .bottom-nav {
            display: none;
        }
    }

    .bottom-nav-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-decoration: none;
        color: rgba(26, 26, 26, 0.5);
        transition: all 0.3s ease;
        padding: 8px 12px;
        border-radius: 12px;
        min-width: 60px;
    }

    .bottom-nav-item i {
        font-size: 24px;
        margin-bottom: 4px;
        transition: all 0.3s ease;
    }

    .bottom-nav-item span {
        font-size: 11px;
        font-weight: 600;
        transition: all 0.3s ease;
    }

    .bottom-nav-item.active {
        color: #F73B20;
    }

    .bottom-nav-item.active i {
        transform: scale(1.1);
    }

    .bottom-nav-item:hover {
        color: #F73B20;
        background: rgba(247, 59, 32, 0.1);
    }

    /* Mobile Logo */
    .mobile-logo {
        position: fixed;
        top: 15px;
        left: 15px;
        z-index: 999;
        font-size: 1.3rem;
        font-weight: 700;
        letter-spacing: -1px;
        display: block;
        text-decoration: none;
        transition: all 0.3s ease;
    }

    .mobile-logo:hover {
        transform: scale(1.05);
    }

    @media (min-width: 768px) {
        .mobile-logo {
            display: none;
        }
    }

    /* Dashboard Container */
    .dashboard-container {
        padding: 40px 20px;
        max-width: 1400px;
        margin: 0 auto;
    }

    .user-profile-section {
        text-align: center;
        margin-bottom: 40px;
        padding: 40px;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(247, 59, 32, 0.15);
        border-radius: 24px;
        box-shadow: 0 10px 40px rgba(247, 59, 32, 0.15);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .user-profile-section:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 50px rgba(247, 59, 32, 0.25);
    }

    .user-avatar-wrapper {
        position: relative;
        width: clamp(96px, 12vw, 200px);
        height: clamp(96px, 12vw, 200px);
        margin: 0 auto 20px;
    }

    .user-avatar-blob {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        overflow: hidden;
        border: 4px solid #F73B20;
        box-shadow: 0 8px 30px rgba(247, 59, 32, 0.4);
        background: linear-gradient(135deg, #F73B20 0%, #ff5238 100%);
        transition: all 0.3s ease;
    }

    .user-avatar-blob:hover {
        transform: scale(1.05);
        border-color: #ff5238;
    }

    .user-avatar-blob img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .user-avatar-blob2 {
        position: relative;
        display: inline-block;
    }

    .user-display-name {
        font-size: clamp(1.2rem, 2.2vw, 2rem);
        font-weight: 800;
        color: #F73B20;
        margin-bottom: 10px;
    }

    /* Stats Grid */
    .stats-grid-wrapper {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    .stat-card-item {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(247, 59, 32, 0.15);
        border-radius: 24px;
        padding: 25px;
        text-align: center;
        box-shadow: 0 8px 25px rgba(247, 59, 32, 0.12);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .stat-card-item:hover {
        transform: translateY(-8px);
        border-color: rgba(247, 59, 32, 0.3);
        box-shadow: 0 12px 35px rgba(247, 59, 32, 0.25);
    }

    .stat-card-label {
        font-size: 0.95rem;
        color: rgba(26, 26, 26, 0.6);
        text-transform: uppercase;
        font-weight: 700;
        letter-spacing: 1px;
        margin-bottom: 12px;
    }

    .stat-card-value {
        font-size: clamp(1.4rem, 3vw, 2.2rem);
        font-weight: 900;
        color: #F73B20;
    }

    .stat-card-value1 {
        font-size: clamp(0.5rem, 3vw, 2rem);
        font-weight: 700;
        color: #F73B20;
        list-style-type: none;
        display: flex;
        gap: 1.5rem;
        justify-content: center;
        align-items: center;
        flex-wrap: nowrap;
    }

    .stat-card-value1 .antr {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .stat-card-meta {
        font-size: 0.8rem;
        color: #ff5238;
        margin-top: 8px;
        font-weight: 600;
    }

    /* Info Cards */
    .info-card-container {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(247, 59, 32, 0.15);
        border-radius: 24px;
        padding: 30px;
        box-shadow: 0 8px 25px rgba(247, 59, 32, 0.12);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        margin-bottom: 30px;
    }

    .info-card-container:hover {
        border-color: rgba(247, 59, 32, 0.3);
        box-shadow: 0 12px 35px rgba(247, 59, 32, 0.2);
    }

    .info-card-title {
        font-size: 1.4rem;
        font-weight: 800;
        color: #F73B20;
        margin-bottom: 15px;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .info-card-text, .analytics-info-line {
        color: rgba(26, 26, 26, 0.65);
        line-height: 1.8;
        font-size: 1rem;
    }

    /* Posts Section */
    .posts-section-title {
        font-size: clamp(1.6rem, 3.2vw, 2.2rem);
        font-weight: 900;
        text-align: center;
        margin: 50px 0 35px;
        color: #F73B20;
        text-transform: uppercase;
        letter-spacing: 2px;
    }

    .post-card-link,
    .post-card-link * {
        text-decoration: none !important;
    }

    .post-card-item {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(247, 59, 32, 0.15);
        border-radius: 20px;
        overflow: hidden;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 8px 25px rgba(247, 59, 32, 0.12);
        display: flex;
        flex-direction: column;
        height: 100%;
    }

    .post-card-item:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 45px rgba(247, 59, 32, 0.25);
        border-color: rgba(247, 59, 32, 0.3);
    }

    .post-image-wrapper {
        width: 100%;
        height: 200px;
        overflow: hidden;
        position: relative;
        background: linear-gradient(135deg, #F73B20 0%, #ff5238 100%);
    }

    .post-image-wrapper img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center;
        transition: transform 0.4s ease;
    }

    .post-card-item:hover .post-image-wrapper img {
        transform: scale(1.1);
    }

    .post-card-content {
        padding: 15px;
        flex-grow: 1;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .post-card-title {
        margin-bottom: 5px;
        font-size: 15px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        color: #1a1a1a;
        font-weight: 700;
    }

    .post-hashtag {
        color: #F73B20;
        font-size: 13px;
        margin-bottom: 5px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        font-weight: 600;
    }

    .post-datetime {
        font-size: 0.8rem;
        color: rgba(26, 26, 26, 0.5);
    }

    .post-card-footer-section {
        padding: 10px 15px;
        background: rgba(247, 59, 32, 0.05);
        border-top: 1px solid rgba(247, 59, 32, 0.15);
        text-align: center;
    }

    .post-rating-value {
        font-weight: 900;
        font-size: 1.3rem;
        color: #F73B20;
    }

    /* Badge Side */
    .badge-side, .referral-badge, .rank-badge {
        position: absolute;
        right: -6%;
        bottom: 6%;
        width: 28%;
        height: 28%;
        border-radius: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, #F73B20 0%, #ff5238 100%);
        box-shadow: 0 8px 30px rgba(247, 59, 32, 0.5);
        transition: transform 0.3s ease;
        border: 3px solid white;
    }

    .badge-side:hover, .referral-badge:hover, .rank-badge:hover {
        transform: translateY(-5%) scale(1.05);
    }

    .badge-side img, .referral-badge img, .rank-badge img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: inherit;
    }

    /* Leaderboard Section */
    .leaderboard-neighbors {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(247, 59, 32, 0.15);
        border-radius: 24px;
        padding: 2.5rem 1.5rem;
        margin-top: 50px;
        box-shadow: 0 10px 40px rgba(247, 59, 32, 0.15);
        text-align: center;
        transition: all 0.3s ease;
    }

    .leaderboard-neighbors:hover {
        box-shadow: 0 15px 50px rgba(247, 59, 32, 0.25);
    }

    .leaderboard-neighbors h3 {
        font-size: 1.8rem;
        font-weight: 900;
        color: #F73B20;
        text-transform: uppercase;
        letter-spacing: 2px;
        margin-bottom: 2rem;
    }

    .neighbor-container {
        display: flex;
        justify-content: center;
        align-items: flex-start;
        gap: 50px;
        flex-wrap: wrap;
        position: relative;
    }

    .neighbor-wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .neighbor {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(247, 59, 32, 0.2);
        border-radius: 25px;
        box-shadow: 0 10px 30px rgba(247, 59, 32, 0.15);
        padding: 1.5rem;
        width: 320px;
        text-align: center;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        cursor: pointer;
        position: relative;
    }

    .neighbor:hover {
        transform: translateY(-8px);
        border-color: rgba(247, 59, 32, 0.4);
        box-shadow: 0 15px 45px rgba(247, 59, 32, 0.3);
    }

    .neighbor-img {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        object-fit: cover;
        margin-bottom: 15px;
        border: 4px solid #F73B20;
        box-shadow: 0 6px 20px rgba(247, 59, 32, 0.3);
        transition: all 0.3s ease;
    }

    .neighbor:hover .neighbor-img {
        transform: scale(1.08);
        border-color: #ff5238;
    }

    .neighbor-label {
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 1.5px;
        font-weight: 700;
        color: rgba(26, 26, 26, 0.5);
        margin-bottom: 12px;
    }

    .neighbor-label-current {
        color: #F73B20;
    }

    .neighbor-info h4 {
        color: #1a1a1a;
        font-size: 1.1rem;
        font-weight: 700;
    }

    .neighbor-info {
        white-space: nowrap;
        text-decoration: none;
        color: inherit;
        transition: all 0.3s ease;
    }

    .neighbor-info:hover {
        color: #F73B20;
    }

    /* Admirers */
    .admirers-container {
        display: flex;
        justify-content: space-around;
        align-items: center;
        gap: 20px;
        flex-wrap: wrap;
        padding: 15px 0;
    }

    .admirer-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
        text-decoration: none;
        transition: all 0.3s ease;
        min-width: 90px;
    }

    .admirer-item:hover {
        transform: translateY(-5px);
    }

    .admirer-rank {
        font-size: 0.9rem;
        font-weight: 800;
        color: #F73B20;
    }

    .admirer-photo {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        object-fit: cover;
        border: 3px solid #F73B20;
        box-shadow: 0 6px 20px rgba(247, 59, 32, 0.3);
        transition: all 0.3s ease;
    }

    .admirer-item:hover .admirer-photo {
        border-color: #ff5238;
        transform: scale(1.05);
    }

    .admirer-name {
        font-size: 0.85rem;
        color: rgba(26, 26, 26, 0.7);
        font-weight: 700;
        text-align: center;
        word-break: break-word;
        max-width: 90px;
    }

    .no-admirers {
        color: rgba(26, 26, 26, 0.4);
        font-style: italic;
        font-size: 0.95rem;
    }

    .niche {
        margin-bottom: 1.5rem;
    }

    .today_heading {
        font-size: 1.8rem;
        font-weight: 900;
        color: #F73B20;
        text-transform: uppercase;
        letter-spacing: 2px;
    }

    .chart-section {
        padding: 20px;
    }

    /* Popup Styles */
    .popup-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(0, 0, 0, 0.7);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.4s ease;
    }

    .popup-overlay.show {
        opacity: 1;
        visibility: visible;
    }

    .popup {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        padding: 40px 60px;
        border-radius: 25px;
        text-align: center;
        color: #1a1a1a;
        box-shadow: 0 10px 50px rgba(247, 59, 32, 0.4);
        border: 2px solid rgba(247, 59, 32, 0.3);
        position: relative;
        overflow: hidden;
        animation: popupScale 0.6s ease-out;
    }

    @keyframes popupScale {
        0% { transform: scale(0.8); opacity: 0; }
        100% { transform: scale(1); opacity: 1; }
    }

    .badge-wrapper {
        position: relative;
        margin-bottom: 15px;
    }

    .badge {
        background: linear-gradient(135deg, #F73B20, #ff5238);
        width: 120px;
        height: 120px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto;
        position: relative;
        box-shadow: 0 0 40px rgba(247, 59, 32, 0.6);
        animation: pulse 1.5s infinite;
    }

    .badge-text {
        font-size: 2.5em;
        font-weight: bold;
        color: #fff;
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }

    .shine {
        position: absolute;
        top: 0;
        left: -75%;
        width: 50%;
        height: 100%;
        background: linear-gradient(120deg, rgba(255, 255, 255, 0.4), rgba(255, 255, 255, 0));
        transform: skewX(-25deg);
        animation: shine 2s infinite;
    }

    @keyframes shine {
        0% { left: -75%; }
        100% { left: 125%; }
    }

    .points-earned {
        font-size: 1.2em;
        margin-top: 15px;
        color: #F73B20;
        font-weight: 700;
    }

    @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.08); }
    }

    .close-btn {
        position: absolute;
        top: 15px;
        right: 20px;
        font-size: 32px;
        color: rgba(26, 26, 26, 0.4);
        background: none;
        border: none;
        cursor: pointer;
        transition: all 0.3s ease;
        z-index: 1001;
    }

    .close-btn:hover {
        color: #F73B20;
        transform: rotate(90deg);
    }

    /* Responsive Styles */
    @media (max-width: 768px) {
        .user-avatar-wrapper {
            width: clamp(88px, 18vw, 160px);
            height: clamp(88px, 18vw, 160px);
        }

        .badge-side, .referral-badge, .rank-badge {
            width: 30%;
            height: 30%;
            right: -8%;
            bottom: 8%;
        }

        .neighbor-container {
            gap: 30px;
        }

        .leaderboard-neighbors h3 {
            font-size: 1.5rem;
        }

        .post-image-wrapper {
            height: 140px;
        }

        .post-card-content {
            padding: 10px;
        }

        .admirer-item {
            min-width: 65px;
        }

        .admirer-photo {
            width: 65px;
            height: 65px;
        }

        .admirer-name {
            font-size: 0.75rem;
            max-width: 65px;
        }
    }

    @media (max-width: 480px) {
        .dashboard-container {
            padding: 20px 12px;
        }

        .user-avatar-wrapper {
            width: clamp(72px, 28vw, 120px);
            height: clamp(72px, 28vw, 120px);
        }

        .badge-side, .referral-badge, .rank-badge {
            width: 32%;
            height: 32%;
            right: -10%;
            bottom: 10%;
        }

        .neighbor-container {
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
        }

        .leaderboard-neighbors h3 {
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
        }
    }

    @media (max-width: 400px) {
        .neighbor-container {
            flex-direction: row;
            justify-content: center;
            gap: 15px;
            flex-wrap: nowrap;
        }

        .neighbor-wrapper {
            flex: 1;
            max-width: 48%;
        }

        .neighbor {
            width: 100%;
            padding: 1rem;
        }

        .neighbor-img {
            width: 90px;
            height: 90px;
            margin-bottom: 10px;
        }

        .neighbor-label {
            font-size: 0.75rem;
            margin-bottom: 8px;
        }

        .neighbor-info h4 {
            font-size: 0.9rem;
        }

        .leaderboard-neighbors {
            padding: 1.5rem 0.8rem;
        }

        .leaderboard-neighbors h3 {
            font-size: 1.1rem;
            margin-bottom: 1.2rem;
        }

        .admirers-container {
            gap: 8px;
            justify-content: space-between;
        }

        .admirer-item {
            min-width: 58px;
        }

        .admirer-photo {
            width: 58px;
            height: 58px;
        }

        .admirer-rank {
            font-size: 0.8rem;
        }
    }

    /* Fade in animations */
    .fade-in {
        opacity: 0;
        transform: translateY(30px);
        animation: fadeInUp 0.8s ease forwards;
    }

    @keyframes fadeInUp {
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .fade-in-delay-1 { animation-delay: 0.2s; }
    .fade-in-delay-2 { animation-delay: 0.4s; }
    .fade-in-delay-3 { animation-delay: 0.6s; }
    .fade-in-delay-4 { animation-delay: 0.8s; }
  </style>
</head>
<body>
<div class="bg-gradient">
  <div class="gradient-orb orb-1"></div>
  <div class="gradient-orb orb-2"></div>
  <div class="gradient-orb orb-3"></div>
  <span></span>
</div>

<!-- Mobile Logo -->
<a href="#" class="mobile-logo">
  <span class="logo-hot">Hot</span><span class="logo-not">Or</span><span class="logo-hot">Not</span>
</a>

<!-- Desktop Navigation -->
<nav class="navbar-desktop navbar navbar-expand-lg navbar-light sticky-top">
  <div class="container-fluid px-4">
    <a class="navbar-brand" href="#">
      <span class="logo-hot">Hot</span><span class="logo-not">Or</span><span class="logo-hot">Not</span>
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto align-items-center">
        <li class="nav-item">
          <a class="nav-link active" href="/user/dashboard">Dashboard</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/user/rating">Rate</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/user/add-new-post">Add Post</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/user/games">Games</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/user/mutual-crush">Mutual Crush</a>
        </li>
        <li class="nav-item ms-3">
          <a href="/logout" class="btn btn-neon btn-sm rounded-pill px-4">Logout</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- Mobile Bottom Navigation -->
<nav class="bottom-nav">
  <a href="/user/rating" class="bottom-nav-item">
    <i class="bi bi-fire"></i>
    <span>Rate</span>
  </a>
  <a href="/user/games" class="bottom-nav-item">
    <i class="bi bi-controller"></i>
    <span>Games</span>
  </a>
  <a href="/user/add-new-post" class="bottom-nav-item">
    <i class="bi bi-plus-circle-fill"></i>
    <span>Add Post</span>
  </a>
  <a href="/user/mutual-crush" class="bottom-nav-item">
    <i class="bi bi-heart-fill"></i>
    <span>Crush</span>
  </a>
  <a href="/user/dashboard" class="bottom-nav-item active">
    <i class="bi bi-house-door-fill"></i>
    <span>Dashboard</span>
  </a>
</nav>

<div class="dashboard-container fade-in">
  <div class="user-profile-section fade-in-delay-1">
    <div class="user-avatar-wrapper">
      <div class="user-avatar-blob">
        <img th:src="${profileImage != '' ? profileImage : '/noprofilepic.png'}"
             alt="Profile"/>
      </div>
    </div>
    <h5 class="user-display-name" th:text="${user.username}">Username</h5>
    <div class="user-avatar-blob2">
      <div class="badge-side" th:if="${badgeImage != null}" th:title="${badgeName}">
        <img th:src="${badgeImage}" th:alt="${badgeName} + ' badge'"/>
      </div>
      <div class="referral-badge" th:if="${referralBadgeImage != null}" th:title="${referralBadgeName}">
        <img th:src="${referralBadgeImage}" th:alt="${referralBadgeName}"/>
      </div>
      <div class="rank-badge" th:if="${rankBadgeImage != null}" th:title="${rankBadgeName}">
        <img th:src="${rankBadgeImage}" alt="Rank Badge"/>
      </div>
    </div>
  </div>

  <div class="stats-grid-wrapper fade-in fade-in-delay-2">
    <div class="stat-card-item">
      <h6 class="stat-card-label">Total Points</h6>
      <h3 class="stat-card-value" th:text="${totalRating}">0</h3>
    </div>

    <div class="stat-card-item">
      <h6 class="stat-card-label">Global Rank</h6>
      <h3 class="stat-card-value" th:text="${globalRank}">0</h3>
    </div>

    <div class="stat-card-item">
      <h6 class="stat-card-label">Local Rank</h6>
      <h3 class="stat-card-value" th:text="${localRank}">0</h3>
    </div>

    <div class="stat-card-item" th:if="${isOwnDashboard}">
      <h6 class="stat-card-label">Mutual Crushes</h6>
      <h3 class="stat-card-value" th:text="${mutualCount}"></h3>
    </div>

    <div class="stat-card-item" th:if="${isOwnDashboard}">
      <h6 class="stat-card-label">Daily Streak</h6>
      <p>Longest streak: <span th:text="${longestStreak}"></span> days</p>
      <h3 class="stat-card-value" th:text="${streak}">0</h3>
    </div>
  </div>

  <div class="stat-card-item niche fade-in fade-in-delay-3" th:if="${isOwnDashboard}">
    <h6 class="stat-card-label">Top Admirers</h6>
    <div class="admirers-container">
      <a th:each="admirer, iterStat : ${topAdmirers}" th:href="@{'/user/dashboard/' + ${admirer.id}}"
         class="admirer-item">
        <span class="admirer-rank" th:text="${iterStat.count} + '.'"></span>
        <img th:if="${admirer.photo!=null}" th:src="${admirer.photo}" alt="Admirer Photo"
             class="admirer-photo"/>
        <img th:if="${admirer.photo==null}" src="/noprofilepic.png" alt="Admirer Photo" class="admirer-photo"/>
        <span class="admirer-name" th:text="${admirer.name}"></span>
      </a>
      <span th:if="${#lists.isEmpty(topAdmirers)}" class="no-admirers">No admirers yet</span>
    </div>
  </div>

  <div class="info-card-container fade-in fade-in-delay-4">
    <h6 class="info-card-title">Bio</h6>
    <p class="info-card-text" th:text="${user.bio != null ? user.bio : 'No bio provided.'}">User bio goes here.</p>
  </div>

  <div class="info-card-container fade-in fade-in-delay-4" th:if="${isOwnDashboard}">
    <h5 class="info-card-title">Analytics</h5>
    <p class="analytics-info-line" th:text="${analyticsLine1}">Analytics line 1</p>
    <p class="analytics-info-line" th:text="${analyticsLine2}">Analytics line 2</p>
    <p class="analytics-info-line" th:text="${analyticsLine4}">Analytics line 4</p>
    <p class="analytics-info-line" th:text="${analyticsLine5}">Analytics line 5</p>
  </div>

  <div class="stat-card-item fade-in" th:if="${isOwnDashboard}">
    <div class="chart-section" th:if="${!#maps.isEmpty(categoryPointsMap)}">
      <h4 style="text-align:center; margin-top:30px;" class="today_heading">
        Today's Points Breakdown
      </h4>
      <canvas id="pointsChart" style="max-width: 600px; margin: 0 auto;"></canvas>
    </div>
    <div class="chart-section"
         th:unless="${!#maps.isEmpty(categoryPointsMap)}"
         style="padding: 30px; text-align:center; color: rgba(26, 26, 26, 0.6);">
      <h4>No points available for today</h4>
      <p>Your activity breakdown will appear here once you earn points.</p>
    </div>
  </div>

  <div class="leaderboard-neighbors fade-in">
    <h3>Leaderboard Neighbours</h3>
    <div class="neighbor-container">
      <div th:if="${aboveUser != null}" class="neighbor-wrapper">
        <p class="neighbor-label">Previous</p>
        <div class="neighbor" th:attr="onclick=|window.location.href='/user/dashboard/${aboveUser.userId}'|"
             style="cursor:pointer;">
          <img th:if="${aboveUserImage != null}" th:src="${aboveUserImage}" alt="User Photo"
               class="neighbor-img">
          <img th:if="${aboveUserImage == null}" src="/noprofilepic.png" alt="Default" class="neighbor-img">
          <div class="neighbor-info">
            <h4 th:text="${AboveName}"></h4>
          </div>
        </div>
      </div>
      <div th:if="${belowUser != null}" class="neighbor-wrapper">
        <p class="neighbor-label">Next</p>
        <div class="neighbor" th:attr="onclick=|window.location.href='/user/dashboard/${belowUser.userId}'|"
             style="cursor:pointer;">
          <img th:if="${belowUserImage != null}" th:src="${belowUserImage}" alt="User Photo"
               class="neighbor-img">
          <img th:if="${belowUserImage == null}" src="/noprofilepic.png" alt="Default" class="neighbor-img">
          <div class="neighbor-info">
            <h4 th:text="${BelowName}"></h4>
          </div>
        </div>
      </div>
    </div>
  </div>

  <h2 class="posts-section-title fade-in">Posts</h2>
  <div class="row g-3 fade-in">
    <div class="col-lg-3 col-md-3 col-4" th:each="p : ${postDtos}">
      <a th:if="${isOwnDashboard}" th:href="@{'/user/post/' + ${p.postId} + '/demographics'}"
         class="post-card-link">
        <div class="post-card-item">
          <div class="post-image-wrapper">
            <img th:if="${p.photoDataUrl != null}" th:src="${p.photoDataUrl}" alt="Post Image">
            <img th:unless="${p.photoDataUrl != null}" src="/noprofilepic.png" alt="Post Image">
          </div>
          <div class="post-card-content">
            <div class="post-rating-value"
                 th:text="${p.avgRating == 0} ? '0' : ${#numbers.formatDecimal(p.avgRating, 1, 1)}">0
            </div>
          </div>
        </div>
      </a>
      <div th:if="${!isOwnDashboard}" class="post-card-item" style="cursor: default;">
        <div class="post-image-wrapper">
          <img th:if="${p.photoDataUrl != null}" th:src="${p.photoDataUrl}" alt="Post Image">
          <img th:unless="${p.photoDataUrl != null}" src="/noprofilepic.png" alt="Post Image">
        </div>
        <div class="post-card-content">
          <div class="post-rating-value"
               th:text="${p.avgRating == 0} ? '0' : ${#numbers.formatDecimal(p.avgRating, 1, 1)}">0
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="popup-overlay" id="popupOverlay">
  <div class="popup">
    <button class="close-btn" onclick="closePopup()">&times;</button>

    <div class="badge-wrapper">
      <div class="badge">
        <div class="shine"></div>
        <div class="badge-text">+<span id="badgePoints">50</span></div>
      </div>
    </div>

    <div class="points-earned" style="font-size:13px;"><span id="pointsText">You earned 50 points!</span></div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>

<script>
  // Navbar scroll effect
  window.addEventListener('scroll', function() {
      const navbar = document.querySelector('.navbar-desktop');
      if (navbar) {
          if (window.scrollY > 50) {
              navbar.classList.add('scrolled');
          } else {
              navbar.classList.remove('scrolled');
          }
      }
  });

  // Active nav state management for mobile
  document.addEventListener('DOMContentLoaded', function() {
      const currentPath = window.location.pathname;
      const navItems = document.querySelectorAll('.bottom-nav-item');

      navItems.forEach(item => {
          if (item.getAttribute('href') === currentPath) {
              item.classList.add('active');
          }
      });
  });

  // Popup functions
  function closePopup() {
      document.getElementById('popupOverlay').classList.remove('show');
  }
</script>
</body>
</html>